---
title: ğŸ”„ Process de dÃ©veloppement
---

import Image from '@theme/IdealImage';

# Process de dÃ©veloppement

<Image img={require("../assets/website-dev-workflow.png")} style={{width: "50%"}}/>

## Branches

### 2 branches permanentes

- **main** : la prod. Ne peut Ãªtre mis Ã  jour que via une branche de release
(et une validation produit). Elle est associÃ©e Ã  une version fixe du modÃ¨le.
- **preprod** : notre environnement de dev sur lequel arrive toutes les PR
(aprÃ¨s code review) non recettÃ©es par Jeanne. La recette fonctionnelle â€œrapideâ€
se fait ici. Cette branche risque forcÃ©ment de contenir des bugs vu que
nâ€™importe qui peut merger sans recette fonctionnelle. Elle est associÃ©e Ã 
latest du modÃ¨le.

### Une branche temporaire

- **release-X-Y-Z** : Lorsque lâ€™on est prÃªt Ã  faire une release, on crÃ©e cette
branche Ã  partir de preprod. Plus aucune feature ne sera ajoutÃ©e Ã  la release
par la suite. Elle a les mÃªmes variables dâ€™env que la prod (y compris la
version du modÃ¨le). La recette fonctionnelle â€œapprofondieâ€ se fait ici. Les fix
de bugs dÃ©couverts pendant cette recette sont mergÃ©s directement dans cette
branche. Cette branche est ensuite squash & merge dans main, puis merge dans
preprod.

## Process

### Cycle de vie dâ€™une feature/fix

1. CrÃ©ation dâ€™une branche de travail Ã  partir de preprod. Vous pouvez nommer
   cette branche comme vous le souhaitez (je prends personnellement le numÃ©ro
   de ticket Notion, mais â€œcertainsâ€ ne sont pas fan).
2. CrÃ©ation dâ€™une PR de cette branche vers preprod. La PR se nomme
   â€œnom_du_ticket_notion_[NGC-numero-notion]â€. Demande de review lorsque lâ€™on
   estime le travail fait et que les tests e2e passent.
3. Si validation de la PR, plus aucune feature ne doit Ãªtre ajoutÃ©e Ã  la
   branche (sauf petit fix Ã  la marge demandÃ© dans les commentaires de la
   review). Elle peut Ãªtre mergÃ©e directement (essayons de ne pas trop trainer
   pour ne pas avoir 15 merge Ã  faire ensuite)
4. Si demande de modifications revenir Ã  lâ€™Ã©tape 2.
5. Recette fonctionnelle dans preprod. Si tout va bien, on oublie. Sinon Ã§a
   retourne dans le sprint backlog, on rÃ©ouvre la branche et on retourne Ã 
   lâ€™Ã©tape 2.

### Cycle de vie dâ€™une release

1. Tata Jeanne dit â€œC bon la release c go mdr jppâ€ â‡’ on met Ã  jour le numÃ©ro de
release dans package.json sur preprod puis on crÃ©e une branche de release.
Cette branche se nomme release-X-Y-Z (et pas releaseX.Y.Z ou releaseXYZ)
2. On crÃ©e une PR de la branche de release vers main. On pense bien Ã  fixer la
version du modÃ¨le sur cette branche.
3. Tata Jeanne (abrÃ©gÃ©e â€œTJâ€ par la suite) fait une recette approfondie sur
lâ€™url de cette PR.
4. Chaque bug repÃ©rÃ© par TJ donne lieu Ã  un fix (reprendre Cycle de vie dâ€™une
feature/fix en remplaÃ§ant preprod par release-X-Y-Z)
5. TJ donne son go pour la mise en prod. Elle ne sâ€™effectue pas aprÃ¨s 16h, ni
un jeudi aprem. On rÃ©cupÃ¨re toutes les PR dâ€™ajout de features / correction de
bugs en prod pour faire la liste du changelog. On fait ensuite un merge â€œSquash
and mergeâ€ avec comme titre â€œRelease X.Y.Zâ€ et comme description le changelog.
6. On crÃ©e une nouvelle PR de la branche de release vers preprod (pour
rÃ©cupÃ©rer les fix de la release). On fait un commit de merge normal.
7. On crÃ©e une nouvelle release sur le repo (bien penser Ã  crÃ©er une release
sur main et pas preprod). Titre â€œRelease X.Y.Zâ€ et changelog (prÃ©cÃ©demment
Ã©tabli) en description.
8. On fait un message sur NGC-dev pour sâ€™autocongratuler et que TJ puisse aller
faire un tour sur la prod.
